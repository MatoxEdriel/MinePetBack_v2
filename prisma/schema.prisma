generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model persons {
  id                  Int                  @id @default(autoincrement())
  type_id             Int?
  name                String?              @db.VarChar(255)
  last_name           String?              @db.VarChar(255)
  email               String?              @db.VarChar(255)
  birthday_day        DateTime?            @db.Date
  phone               String?              @db.VarChar(255)
  address             String?              @db.VarChar(255)
  type_identification type_identification? @relation(fields: [type_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  users               users[]
}

model roles {
  id                Int                 @id @default(autoincrement())
  name              String?             @db.VarChar(255)
  user_created      String?             @db.VarChar(255)
  updated_by        String?             @db.VarChar(255)
  created_by        Int?
  deleted_by        Int?
  created_at        DateTime?           @default(now()) @db.Timestamp(6)
  updated_at        DateTime?           @db.Timestamp(6)
  deleted_at        DateTime?           @db.Timestamp(6)
  roles_permissions roles_permissions[]
  user_roles        user_roles[]
}

model type_identification {
  id      Int       @id @default(autoincrement())
  name    String?   @db.VarChar(255)
  persons persons[]
}

model users {
  id           Int          @id @default(autoincrement())
  person_id    Int?
  user_name    String?      @db.VarChar(255)
  password     String?      @db.VarChar(255)
  created_at   DateTime?    @default(now()) @db.Timestamp(6)
  updated_at   DateTime?    @db.Timestamp(6)
  user_created String?      @db.VarChar(255)
  deleted_at   DateTime?    @db.Timestamp(6)
  first_login  Boolean?
  attempts     Int?
  user_roles   user_roles[]
  persons      persons?     @relation(fields: [person_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model permissions {
  id                Int                 @id @default(autoincrement())
  name              String?             @db.VarChar(255)
  description       String?             @db.VarChar(255)
  create_at         DateTime?           @default(now()) @db.Timestamp(6)
  updated_at        DateTime?           @db.Timestamp(6)
  deleted_at        DateTime?           @db.Timestamp(6)
  module            String?             @db.VarChar(255)
  roles_permissions roles_permissions[]
}

model roles_permissions {
  id             Int          @id @default(autoincrement())
  id_permissions Int?
  id_roles       Int?
  create_at      DateTime?    @default(now()) @db.Timestamp(6)
  updated_at     DateTime?    @db.Timestamp(6)
  deleted_at     DateTime?    @db.Timestamp(6)
  permissions    permissions? @relation(fields: [id_permissions], references: [id], onDelete: NoAction, onUpdate: NoAction)
  roles          roles?       @relation(fields: [id_roles], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model user_roles {
  user_id Int
  role_id Int
  roles   roles @relation(fields: [role_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  users   users @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([user_id, role_id])
}
